(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{269:function(t,a,s){"use strict";s.r(a);var n=s(38),r=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),s("h3",{attrs:{id:"nuomi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nuomi","aria-hidden":"true"}},[t._v("#")]),t._v(" Nuomi")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("id")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("store id，不设置会动态创建")])]),t._v(" "),s("tr",[s("td",[t._v("async")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("异步加载props")])]),t._v(" "),s("tr",[s("td",[t._v("state")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("初始状态")])]),t._v(" "),s("tr",[s("td",[t._v("data")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("临时数据")])]),t._v(" "),s("tr",[s("td",[t._v("store")]),t._v(" "),s("td",[t._v("{ dispatch, getState }")]),t._v(" "),s("td",[t._v("派发和获取当前模块状态，内部创建，不可修改，也无需传递，dispatch可以调用effects中的方法，也可以调用其他模块的effects")])]),t._v(" "),s("tr",[s("td",[t._v("reducers")]),t._v(" "),s("td",[t._v("{ _updateState }")]),t._v(" "),s("td",[t._v("更新状态")])]),t._v(" "),s("tr",[s("td",[t._v("effects")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("异步或者同步更新状态，异步处理使用async await，用于业务处理，支持对象和函数，函数必须返回对象，内部需dispatch调用reducers中的方法，方法名有$前缀时会被设置为loading状态，通过connect可以在loadings中获取到，不需要开发时手动控制loading状态")])]),t._v(" "),s("tr",[s("td",[t._v("render")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("渲染组件")])]),t._v(" "),s("tr",[s("td",[t._v("onInit")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("状态被创建后回调，可以通过this.store更新状态")])])])]),t._v(" "),s("h3",{attrs:{id:"ruoter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ruoter","aria-hidden":"true"}},[t._v("#")]),t._v(" Ruoter")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("hashPrefix")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("hash前缀 ("),s("span",{staticStyle:{color:"red"}},[t._v("0.7.0-")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("type")]),t._v(" "),s("td",[t._v("'hash' or 'browser'")]),t._v(" "),s("td",[t._v("路由类型，默认是hash ("),s("span",{staticStyle:{color:"green"}},[t._v("0.7.0+")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("basename")]),t._v(" "),s("td",[t._v("'/'")]),t._v(" "),s("td",[t._v("通用路径 ("),s("span",{staticStyle:{color:"green"}},[t._v("0.7.0+")]),t._v(")")])])])]),t._v(" "),s("h3",{attrs:{id:"staticruoter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#staticruoter","aria-hidden":"true"}},[t._v("#")]),t._v(" StaticRuoter")]),t._v(" "),s("p",[t._v("用于服务器渲染 ("),s("span",{staticStyle:{color:"green"}},[t._v("0.7.0+")]),t._v(")")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("location")]),t._v(" "),s("td",[t._v("'/'")]),t._v(" "),s("td",[t._v("服务器端获取的url，可以传入对象，包含pathname、search、params")])]),t._v(" "),s("tr",[s("td",[t._v("basename")]),t._v(" "),s("td",[t._v("'/'")]),t._v(" "),s("td",[t._v("通用路径")])]),t._v(" "),s("tr",[s("td",[t._v("context")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("可以通过context.url获取Redirect组件第一次重定向的url")])])])]),t._v(" "),s("h3",{attrs:{id:"nuomiroute"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nuomiroute","aria-hidden":"true"}},[t._v("#")]),t._v(" NuomiRoute")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("pathPrefix")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("路由path前缀，支持字符串和正则")])]),t._v(" "),s("tr",[s("td",[t._v("path")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("匹配path，优先级高于pathPrefix ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")])])])]),t._v(" "),s("h3",{attrs:{id:"shaperoute"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shaperoute","aria-hidden":"true"}},[t._v("#")]),t._v(" ShapeRoute")]),t._v(" "),s("p",[t._v("可视化设置路由 ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("routes")]),t._v(" "),s("td",[t._v("array")]),t._v(" "),s("td",[t._v("由Route/NuomiRoute/Redirect props组成的数组集合，子路由设置在children属性上，支持组件和数组")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子路由path不用把祖先path加上")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/list'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Router type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hash"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ShapeRoute routes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("routes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Router"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("其他参数同Nuomi组件")]),t._v(" "),s("h3",{attrs:{id:"route"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#route","aria-hidden":"true"}},[t._v("#")]),t._v(" Route")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("path")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("路由path，支持动态参数")])]),t._v(" "),s("tr",[s("td",[t._v("location")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("当前匹配的路由数据，内部创建，不可修改，也无需传递")])]),t._v(" "),s("tr",[s("td",[t._v("wrapper")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("是否给留有创建一个div容器，可实现缓存功能  ("),s("span",{staticStyle:{color:"red"}},[t._v("0.8.0-")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("cache")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("是否给留有创建一个div容器，可实现缓存功能  ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("reload")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("匹配路由后是否重置状态，值为null则不法刷新")])]),t._v(" "),s("tr",[s("td",[t._v("onEnter")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("路由匹配后，在reducer被创建之前回调，返回false将无法展示内容，参数为强制展示回调，调用后可以展示内容")])]),t._v(" "),s("tr",[s("td",[t._v("onChange")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("路由匹配时回调，支持函数和对象")])]),t._v(" "),s("tr",[s("td",[t._v("onLeave")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("路由离开时回调，用于决定是否可以离开")])])])]),t._v(" "),s("p",[t._v("其他参数同Nuomi组件，\n回调的执行顺序是 onEnter > location.data > onChange > onInit，location.data下面路由跳转时会讲到\n"),s("br"),s("b",[t._v("注意：path和cache不能异步加载")])]),t._v(" "),s("h3",{attrs:{id:"redirect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redirect","aria-hidden":"true"}},[t._v("#")]),t._v(" Redirect")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("from")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("匹配当前路由path，会重定向至to设置的path")])]),t._v(" "),s("tr",[s("td",[t._v("to")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("重定向路由path")])]),t._v(" "),s("tr",[s("td",[t._v("reload")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("跳转后是否重置状态")])])])]),t._v(" "),s("h3",{attrs:{id:"link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#link","aria-hidden":"true"}},[t._v("#")]),t._v(" Link")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("to")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("目标path")])]),t._v(" "),s("tr",[s("td",[t._v("data")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("传递的数据 ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("replace")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("跳转是否替换当前history ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("reload")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("跳转后是否重置状态")])])])]),t._v(" "),s("h3",{attrs:{id:"navlink"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#navlink","aria-hidden":"true"}},[t._v("#")]),t._v(" NavLink")]),t._v(" "),s("p",[t._v("可以匹配path的Link ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("props")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("path")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("匹配path")])]),t._v(" "),s("tr",[s("td",[t._v("activeClassName")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("匹配className")])]),t._v(" "),s("tr",[s("td",[t._v("activeStyle")]),t._v(" "),s("td",[t._v("null")]),t._v(" "),s("td",[t._v("匹配样式")])]),t._v(" "),s("tr",[s("td",[t._v("isActice")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("自定义匹配，返回boolean，第一个参数是匹配结果，第二个参数是当前location对象")])])])]),t._v(" "),s("p",[t._v("其他参数参考Link")]),t._v(" "),s("h3",{attrs:{id:"connect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#connect","aria-hidden":"true"}},[t._v("#")]),t._v(" connect")]),t._v(" "),s("p",[t._v("用法同react-redux connect，区别是获取状态的函数，第一个参数是获取当前模块的状态，第二个参数是获取全部store里的状态")]),t._v(" "),s("h3",{attrs:{id:"withnuomi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#withnuomi","aria-hidden":"true"}},[t._v("#")]),t._v(" withNuomi")]),t._v(" "),s("p",[t._v("使用后组件中提供nuomiProps属性，nuomiProps指向Nuomi/NuomiRoute/Route组件的props")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("List")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" nuomiProps "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withNuomi")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("List"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks","aria-hidden":"true"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),s("h3",{attrs:{id:"useconnect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useconnect","aria-hidden":"true"}},[t._v("#")]),t._v(" useConnect")]),t._v(" "),s("p",[t._v("高阶组件connect的替代方法")]),t._v(" "),s("p",[t._v("方法返回一个数组，第一个值是状态，第二个值为dispatch，不传参数默认返回当前模块所有状态，接收一个回调函数参数时，用法等同connect第一个参数")]),t._v(" "),s("h3",{attrs:{id:"usenuomi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usenuomi","aria-hidden":"true"}},[t._v("#")]),t._v(" useNuomi")]),t._v(" "),s("p",[t._v("高阶组件withNuomi的替代方法")]),t._v(" "),s("p",[t._v("方法返回一个对象，包含nuomiProps属性")]),t._v(" "),s("h2",{attrs:{id:"对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对象","aria-hidden":"true"}},[t._v("#")]),t._v(" 对象")]),t._v(" "),s("h3",{attrs:{id:"router"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router","aria-hidden":"true"}},[t._v("#")]),t._v(" router")]),t._v(" "),s("h4",{attrs:{id:"router-location"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-location","aria-hidden":"true"}},[t._v("#")]),t._v(" router.location")]),t._v(" "),s("p",[t._v("路由跳转")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("path")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("跳转的路由地址")])]),t._v(" "),s("tr",[s("td",[t._v("data")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("值为对象时表示跳转后传递的临时数据，切换路由后该数据将不存在，跳转后的路由模块中可以通过data获取，data对象上面Nuomi组件有提到，当值是函数时，函数的参数可以获取跳转后路由的props，可以通过store更新状态，更新状态发生在onChange之前，当值为布尔时，等同reload")])]),t._v(" "),s("tr",[s("td",[t._v("reload")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("跳转后是否重置状态")])]),t._v(" "),s("tr",[s("td",[t._v("force")]),t._v(" "),s("td",[t._v("true")]),t._v(" "),s("td",[t._v("当path是当前路由path时，是否强制跳转，reload为true时该值自动为true")])])])]),t._v(" "),s("p",[t._v("不传参数表示获取当前路由数据")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取当前路由数据")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳转后刷新")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳转后传递临时参数并刷新")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳转后更新状态")]),t._v("\n    store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        payload\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// path支持对象，字段等同router.location()获取的对象字段")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pathname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/path'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /path?a=1")]),t._v("\n")])])]),s("h4",{attrs:{id:"router-replace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-replace","aria-hidden":"true"}},[t._v("#")]),t._v(" router.replace")]),t._v(" "),s("p",[t._v("路由跳转，在history中替换当前地址，参数等同location ("),s("span",{staticStyle:{color:"green"}},[t._v("0.7.0+")]),t._v(")")]),t._v(" "),s("h4",{attrs:{id:"router-listener"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-listener","aria-hidden":"true"}},[t._v("#")]),t._v(" router.listener")]),t._v(" "),s("p",[t._v("监听路由变化")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("callback")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("接受参数为location，可以获取当前匹配的路由数据")])])])]),t._v(" "),s("p",[t._v("返回取消监听方法")]),t._v(" "),s("h4",{attrs:{id:"router-reload"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-reload","aria-hidden":"true"}},[t._v("#")]),t._v(" router.reload")]),t._v(" "),s("p",[t._v("路由刷新，等同router.location(当前path, true)")]),t._v(" "),s("h4",{attrs:{id:"router-back"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-back","aria-hidden":"true"}},[t._v("#")]),t._v(" router.back")]),t._v(" "),s("p",[t._v("后退")]),t._v(" "),s("h4",{attrs:{id:"router-forward"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-forward","aria-hidden":"true"}},[t._v("#")]),t._v(" router.forward")]),t._v(" "),s("p",[t._v("前进")]),t._v(" "),s("h4",{attrs:{id:"router-matchpath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-matchpath","aria-hidden":"true"}},[t._v("#")]),t._v(" router.matchPath")]),t._v(" "),s("p",[t._v("用于匹配路由")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("location")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("路由location对象")])]),t._v(" "),s("tr",[s("td",[t._v("path")]),t._v(" "),s("td",[t._v("''")]),t._v(" "),s("td",[t._v("路由设置的path")])])])]),t._v(" "),s("h4",{attrs:{id:"router-mergepath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-mergepath","aria-hidden":"true"}},[t._v("#")]),t._v(" router.mergePath")]),t._v(" "),s("p",[t._v("合并path ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("path1, path2, ...")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("路由path")])])])]),t._v(" "),s("h4",{attrs:{id:"router-block"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-block","aria-hidden":"true"}},[t._v("#")]),t._v(" router.block")]),t._v(" "),s("p",[t._v("定义阻塞路由，接收一个回调函数作为参数，回调函数包含下面参数，返回false则不能跳转 ("),s("span",{staticStyle:{color:"green"}},[t._v("0.8.0+")]),t._v(")")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("value")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("from")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("当前location")])]),t._v(" "),s("tr",[s("td",[t._v("to")]),t._v(" "),s("td",[t._v("{}")]),t._v(" "),s("td",[t._v("目标location")])]),t._v(" "),s("tr",[s("td",[t._v("enter")]),t._v(" "),s("td",[t._v("function")]),t._v(" "),s("td",[t._v("确认跳转函数，在异步中使用")])])])]),t._v(" "),s("h3",{attrs:{id:"nuomi-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nuomi-2","aria-hidden":"true"}},[t._v("#")]),t._v(" nuomi")]),t._v(" "),s("h4",{attrs:{id:"nuomi-getdefaultprops"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nuomi-getdefaultprops","aria-hidden":"true"}},[t._v("#")]),t._v(" nuomi.getDefaultProps")]),t._v(" "),s("p",[t._v("获取最新的默认props")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认props")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loadings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  reducers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("_replaceState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" payload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("_updateState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("payload "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("_updateLoading")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      loadings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loadings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("payload "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"nuomi-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nuomi-config","aria-hidden":"true"}},[t._v("#")]),t._v(" nuomi.config")]),t._v(" "),s("p",[t._v("设置默认props，设置后会覆盖默认值")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("nuomi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        dataSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    reducers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("updateState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payload "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("payload "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"nuomi-extend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nuomi-extend","aria-hidden":"true"}},[t._v("#")]),t._v(" nuomi.extend")]),t._v(" "),s("p",[t._v("合并props，state、reducers、data等会被浅合并")]),t._v(" "),s("h3",{attrs:{id:"store"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store","aria-hidden":"true"}},[t._v("#")]),t._v(" store")]),t._v(" "),s("p",[t._v("请参考 "),s("a",{attrs:{href:"https://cn.redux.js.org/docs/basics/Store.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("redux store"),s("OutboundLink")],1),t._v("\n原生方法建议只使用getState和dispatch，除此之外额外新增了getStore和applyMiddleware方法")]),t._v(" "),s("h4",{attrs:{id:"store-getstate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-getstate","aria-hidden":"true"}},[t._v("#")]),t._v(" store.getState")]),t._v(" "),s("p",[t._v("获取所有状态")]),t._v(" "),s("h4",{attrs:{id:"store-dispatch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-dispatch","aria-hidden":"true"}},[t._v("#")]),t._v(" store.dispatch")]),t._v(" "),s("p",[t._v("更新状态，只能触发reducers中的方法，如果想调用effects方法，请使用store.getStore替代")]),t._v(" "),s("h4",{attrs:{id:"store-getstore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-getstore","aria-hidden":"true"}},[t._v("#")]),t._v(" store.getStore")]),t._v(" "),s("p",[t._v("获取nuomi组件的store，参数是store id，返回对象包含getState和dispatch")]),t._v(" "),s("h4",{attrs:{id:"store-applymiddleware"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-applymiddleware","aria-hidden":"true"}},[t._v("#")]),t._v(" store.applyMiddleware")]),t._v(" "),s("p",[t._v("添加中间件")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyMiddleware")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"store-createstate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-createstate","aria-hidden":"true"}},[t._v("#")]),t._v(" store.createState")]),t._v(" "),s("p",[t._v("初始化状态，只能对 "),s("code",[t._v("nuomiPorps")]),t._v(" 中设置了 "),s("code",[t._v("id")]),t._v(" 属性的模块初始化 ("),s("span",{staticStyle:{color:"green"}},[t._v("0.7.0+")]),t._v(")")]),t._v(" "),s("h2",{attrs:{id:"属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性","aria-hidden":"true"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),s("h3",{attrs:{id:"initialise-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initialise-state","aria-hidden":"true"}},[t._v("#")]),t._v(" INITIALISE_STATE")]),t._v(" "),s("p",[t._v("服务端渲染时用于给window对象添加初始化状态属性 ("),s("span",{staticStyle:{color:"green"}},[t._v("0.7.0+")]),t._v(")")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createServer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" renderToString "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom/server'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INITIALISE_STATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nuomi'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" html "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderToString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" global"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n    <html>\n      <body>\n        <div id="root">')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("</div>\n        <script>window.")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INITIALISE_STATE")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("<\/script>\n      </body>\n    </html>\n  ")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])},[],!1,null,null,null);a.default=r.exports}}]);